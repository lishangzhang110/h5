(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pack_mine-pages-mine-message-index"],{"37c3":function(t,e,a){"use strict";a("6a54");var s=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.msgDetail=function(t){return(0,i.default)({url:"/system/message/get",method:"get",params:t})},e.msgList=function(t){return Object.assign(t,{userType:21}),(0,i.default)({url:"/system/message/user/page",method:"get",params:t})},e.msgRead=function(t){return(0,i.default)({url:"/system/message/read",method:"put",params:t})};var i=s(a("2daf"))},"45b4":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"message_box"},[a("v-uni-view",{staticClass:"tab_box"},t._l(t.tabList,(function(e,s){return a("v-uni-view",{key:s,staticClass:"btn_box",class:{btnActive:t.tabActive.value==e.value},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.tabChange(e)}}},[t._v(t._s(e.label))])})),1),a("v-uni-view",{staticClass:"scroll_box"},[t._l(t.list,(function(e,s){return a("v-uni-view",{key:s,staticClass:"msg_list",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleDetail(e)}}},[a("v-uni-image",{staticClass:"msg_icon",attrs:{src:t.leftIcon(e)}}),a("v-uni-view",{staticClass:"r"},[a("v-uni-view",{staticClass:"msg_time"},[t._v(t._s(t.parseTime(e.createTime)))]),a("v-uni-view",{staticClass:"msg_title",style:0==e.readFlag?"color: #509DFF;":""},[t._v(t._s(e.title))])],1)],1)})),t.loading||t.list.length?t._e():a("v-uni-view",{staticClass:"no_data"},[a("v-uni-image",{staticClass:"data_img",attrs:{src:t.cdn.no_data}}),a("v-uni-view",[t._v("暂无消息和任务")])],1)],2)],1)},i=[]},"497f":function(t,e,a){"use strict";var s=a("fb97"),i=a.n(s);i.a},"507f":function(t,e,a){"use strict";a("6a54");var s=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("7a76"),a("c9b5"),a("5c47"),a("af8f"),a("c223");var i=s(a("2634")),n=s(a("2fdc")),r=s(a("efe5")),o=s(a("80b1")),l=(0,r.default)((function t(){(0,o.default)(this,t),this.pageNo=1,this.pageSize=10,this.total=0})),d={data:function(){return{search:{},page:new l,list:[],apis:{refresh:null},loading:!1}},onReachBottom:function(){this.scrolltolower()},created:function(){this.getList()},methods:{resetHandler:function(){this.page=new l,this.list=[]},searchHandler:function(){var t=this;this.loading=!0,this.resetHandler(),this.$nextTick((function(e){t.getList()}))},scrolltolower:function(){if(this.list.length>=this.page.total)return uni.showToast({title:"已加载全部",icon:"none"});this.page.pageNo++,this.getList()},getList:function(){var t=this;if(!this.apis.refresh||this.apis.refresh.constructor!==Function)throw new Error("缺少refresh接口");var e=Object.assign({},this.search,this.page),a=function(){var a=(0,n.default)((0,i.default)().mark((function a(s){var n,r,o;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=s||e,a.next=3,t.apis.refresh(s);case 3:n=a.sent.data,r=n.list,o=n.total,t.loading=!1,t.list=t.list.concat(r),t.page.total=o;case 9:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}();this.beforeRefresh?this.beforeRefresh(e,a):a()}}};e.default=d},"9b50":function(t,e,a){var s=a("c86c");e=s(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * uni-app内置的常用样式变量\r\n */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.message_box[data-v-46eff0d6]{width:100%;display:flex;flex-direction:column;background:#fff;padding-top:%?100?%}.message_box .tab_box[data-v-46eff0d6]{width:100%;background:#fff;border-bottom:1px solid #e8e8e8;height:%?100?%;width:100vw;display:flex;position:fixed;top:0;z-index:10}.message_box .tab_box .btn_box[data-v-46eff0d6]{flex:1;border-bottom:2px solid transparent;font-size:%?32?%;font-weight:700;display:flex;justify-content:center;align-items:center}.message_box .tab_box .btn_box.btnActive[data-v-46eff0d6]{color:#06c3a6;border-bottom:2px solid #06c3a6}.message_box .scroll_box[data-v-46eff0d6]{padding:%?20?%;position:relative}.message_box .scroll_box .no_data[data-v-46eff0d6]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:30vh;font-size:%?28?%;text-align:center}.message_box .scroll_box .no_data .data_img[data-v-46eff0d6]{width:%?160?%;height:%?100?%}.message_box .scroll_box .msg_list[data-v-46eff0d6]{width:100%;display:flex;align-items:center;background:#f4faff;border-radius:%?12?% %?12?% %?12?% %?12?%;margin-bottom:%?20?%;padding:%?18?%;font-size:%?26?%}.message_box .scroll_box .msg_list .msg_icon[data-v-46eff0d6]{width:%?40?%;height:%?40?%;margin-right:%?20?%}.message_box .scroll_box .msg_list .r .msg_time[data-v-46eff0d6]{padding:%?5?% 0}.message_box .scroll_box .msg_list .r .msg_title[data-v-46eff0d6]{text-overflow:ellipsis;padding:%?5?% 0;font-size:%?32?%}',""]),t.exports=e},ac4c:function(t,e,a){"use strict";a("6a54");var s=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("37c3"),n=s(a("507f")),r=a("4f20"),o={mixins:[n.default],data:function(){return{tabList:[{label:"未阅",value:!1},{label:"已阅",value:!0}],tabActive:{label:"未阅",value:!1},apis:{refresh:i.msgList}}},computed:{leftIcon:function(){return function(t){return 10001==t.busType?this.cdn.notice_task:this.cdn.notice}}},methods:{parseTime:r.parseTime,tabChange:function(t){this.tabActive=t,this.searchHandler()},beforeRefresh:function(t,e){Object.assign(t,{mobile:this.$store.state.user.mobile,readFlag:this.tabActive.value}),e()},handleDetail:function(t){t.readFlag||(0,i.msgRead)({id:t.id}).then((function(e){uni.navigateTo({url:"./detail?id="+t.id})}))}}};e.default=o},da7e:function(t,e,a){"use strict";a.r(e);var s=a("45b4"),i=a("dd12");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("497f");var r=a("828b"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"46eff0d6",null,!1,s["a"],void 0);e["default"]=o.exports},dd12:function(t,e,a){"use strict";a.r(e);var s=a("ac4c"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);e["default"]=i.a},fb97:function(t,e,a){var s=a("9b50");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("967d").default;i("9e47d826",s,!0,{sourceMap:!1,shadowMode:!1})}}]);