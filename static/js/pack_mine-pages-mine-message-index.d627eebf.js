(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pack_mine-pages-mine-message-index"],{4647:function(e,t,a){"use strict";a("6a54");var s=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.msgDetail=function(e){return(0,i.default)({url:"/system/message/get",method:"get",params:e})},t.msgList=function(e){return Object.assign(e,{userType:21}),(0,i.default)({url:"/system/message/user/page",method:"get",params:e})},t.msgRead=function(e){return(0,i.default)({url:"/system/message/read",method:"put",params:e})};var i=s(a("0d07"))},"5e6d":function(e,t,a){"use strict";a("6a54");var s=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("7a76"),a("c9b5"),a("5c47"),a("af8f"),a("c223");var i=s(a("2634")),n=s(a("2fdc")),r=s(a("efe5")),o=s(a("80b1")),l=(0,r.default)((function e(){(0,o.default)(this,e),this.pageNo=1,this.pageSize=10,this.total=0})),d={data:function(){return{search:{},page:new l,list:[],apis:{refresh:null},loading:!1}},onReachBottom:function(){this.scrolltolower()},created:function(){this.getList()},methods:{resetHandler:function(){this.page=new l,this.list=[]},searchHandler:function(){var e=this;this.loading=!0,this.resetHandler(),this.$nextTick((function(t){e.getList()}))},scrolltolower:function(){if(this.list.length>=this.page.total)return uni.showToast({title:"已加载全部",icon:"none"});this.page.pageNo++,this.getList()},getList:function(){var e=this;if(!this.apis.refresh||this.apis.refresh.constructor!==Function)throw new Error("缺少refresh接口");var t=Object.assign({},this.search,this.page),a=function(){var a=(0,n.default)((0,i.default)().mark((function a(s){var n,r,o;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=s||t,a.next=3,e.apis.refresh(s);case 3:n=a.sent.data,r=n.list,o=n.total,e.loading=!1,e.list=e.list.concat(r),e.page.total=o;case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();this.beforeRefresh?this.beforeRefresh(t,a):a()}}};t.default=d},"6fee":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"message_box"},[a("v-uni-view",{staticClass:"tab_box"},e._l(e.tabList,(function(t,s){return a("v-uni-view",{key:s,staticClass:"btn_box",class:{btnActive:e.tabActive.value==t.value},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.tabChange(t)}}},[e._v(e._s(t.label))])})),1),a("v-uni-view",{staticClass:"scroll_box"},[e._l(e.list,(function(t,s){return a("v-uni-view",{key:s,staticClass:"msg_list",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handleDetail(t)}}},[a("v-uni-image",{staticClass:"msg_icon",attrs:{src:e.leftIcon(t)}}),a("v-uni-view",{staticClass:"r"},[a("v-uni-view",{staticClass:"msg_time"},[e._v(e._s(e.parseTime(t.createTime)))]),a("v-uni-view",{staticClass:"msg_title",style:0==t.readFlag?"color: #509DFF;":""},[e._v(e._s(t.title))])],1)],1)})),e.loading||e.list.length?e._e():a("v-uni-view",{staticClass:"no_data"},[a("v-uni-image",{staticClass:"data_img",attrs:{src:e.cdn.no_data}}),a("v-uni-view",[e._v("暂无消息和任务")])],1)],2)],1)},i=[]},cad8:function(e,t,a){"use strict";a.r(t);var s=a("eb02"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},e014:function(e,t,a){"use strict";var s=a("e863"),i=a.n(s);i.a},e525:function(e,t,a){var s=a("c86c");t=s(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * uni-app内置的常用样式变量\r\n */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.message_box[data-v-46eff0d6]{width:100%;display:flex;flex-direction:column;background:#fff;padding-top:%?100?%}.message_box .tab_box[data-v-46eff0d6]{width:100%;background:#fff;border-bottom:1px solid #e8e8e8;height:%?100?%;width:100vw;display:flex;position:fixed;top:0;z-index:10}.message_box .tab_box .btn_box[data-v-46eff0d6]{flex:1;border-bottom:2px solid transparent;font-size:%?32?%;font-weight:700;display:flex;justify-content:center;align-items:center}.message_box .tab_box .btn_box.btnActive[data-v-46eff0d6]{color:#06c3a6;border-bottom:2px solid #06c3a6}.message_box .scroll_box[data-v-46eff0d6]{padding:%?20?%;position:relative}.message_box .scroll_box .no_data[data-v-46eff0d6]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:30vh;font-size:%?28?%;text-align:center}.message_box .scroll_box .no_data .data_img[data-v-46eff0d6]{width:%?160?%;height:%?100?%}.message_box .scroll_box .msg_list[data-v-46eff0d6]{width:100%;display:flex;align-items:center;background:#f4faff;border-radius:%?12?% %?12?% %?12?% %?12?%;margin-bottom:%?20?%;padding:%?18?%;font-size:%?26?%}.message_box .scroll_box .msg_list .msg_icon[data-v-46eff0d6]{width:%?40?%;height:%?40?%;margin-right:%?20?%}.message_box .scroll_box .msg_list .r .msg_time[data-v-46eff0d6]{padding:%?5?% 0}.message_box .scroll_box .msg_list .r .msg_title[data-v-46eff0d6]{text-overflow:ellipsis;padding:%?5?% 0;font-size:%?32?%}',""]),e.exports=t},e813:function(e,t,a){"use strict";a.r(t);var s=a("6fee"),i=a("cad8");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("e014");var r=a("828b"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"46eff0d6",null,!1,s["a"],void 0);t["default"]=o.exports},e863:function(e,t,a){var s=a("e525");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("967d").default;i("5415f752",s,!0,{sourceMap:!1,shadowMode:!1})},eb02:function(e,t,a){"use strict";a("6a54");var s=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("4647"),n=s(a("5e6d")),r=a("984c"),o={mixins:[n.default],data:function(){return{tabList:[{label:"未阅",value:!1},{label:"已阅",value:!0}],tabActive:{label:"未阅",value:!1},apis:{refresh:i.msgList}}},computed:{leftIcon:function(){return function(e){return 10001==e.busType?this.cdn.notice_task:this.cdn.notice}}},methods:{parseTime:r.parseTime,tabChange:function(e){this.tabActive=e,this.searchHandler()},beforeRefresh:function(e,t){Object.assign(e,{mobile:this.$store.state.user.mobile,readFlag:this.tabActive.value}),t()},handleDetail:function(e){e.readFlag||(0,i.msgRead)({id:e.id}).then((function(t){uni.navigateTo({url:"./detail?id="+e.id})}))}}};t.default=o}}]);