(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pack_devices-pages-device-blueDevice"],{"914f":function(e,t,n){"use strict";n.r(t);var c=n("ffa5"),i=n("a4a5");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("b3ed");var o=n("828b"),r=Object(o["a"])(i["default"],c["b"],c["c"],!1,null,"51ec9d63",null,!1,c["a"],void 0);t["default"]=r.exports},a4a5:function(e,t,n){"use strict";n.r(t);var c=n("f24d"),i=n.n(c);for(var a in c)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return c[e]}))}(a);t["default"]=i.a},b3ed:function(e,t,n){"use strict";var c=n("fdb0"),i=n.n(c);i.a},f24d:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d4b5"),n("80e3"),n("4db2"),n("bf0f"),n("c976"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1");var c=getApp(),i={data:function(){return{inputText:"mootek",receiveText:"",name:"",connectedDeviceId:"",services:{},characteristics:{},connected:!0,searching:!1,serviceId:"",characteristicId:""}},components:{},props:{},onLoad:function(e){console.log(e);var t=this;t.name=e.name,t.connectedDeviceId=e.connectedDeviceId,uni.getBLEDeviceServices({deviceId:t.connectedDeviceId,success:function(n){console.log(n.services),t.services=n.services,t.serviceId=n.services[0].uuid,uni.getBLEDeviceCharacteristics({deviceId:e.connectedDeviceId,serviceId:t.serviceId,success:function(n){console.log(n.characteristics),t.characteristics=n.characteristics,t.characteristicId=n.characteristics[1].uuid,uni.notifyBLECharacteristicValueChange({state:!0,deviceId:e.connectedDeviceId,serviceId:t.serviceId,characteristicId:t.characteristicId,success:function(e){console.log("启用notify成功："+t.characteristicId),console.log(JSON.stringify(e)),t.onBLECharacteristicValueChange()},fail:function(){console.log("开启notify失败"+t.characteristicId)}})}})}}),uni.onBLEConnectionStateChange((function(e){console.log(e.connected),t.connected=e.connected}))},onReady:function(){},onShow:function(){},onHide:function(){},methods:{bindInput:function(e){this.inputText=e.detail.value,console.log(e.detail.value)},Send:function(){var e=this;if(e.connected){var t=new ArrayBuffer(e.inputText.length),n=new Uint8Array(t);console.log(t,n);for(var c=0;c<e.inputText.length;c++)n[c]=e.inputText.charCodeAt(c);uni.writeBLECharacteristicValue({deviceId:e.connectedDeviceId,serviceId:e.serviceId,characteristicId:e.characteristicId,value:t,success:function(e){console.log("发送指令成功:"+e.errMsg)},fail:function(e){console.log("message发送失败:"+e.errMsg),uni.showToast({title:"数据发送失败，请稍后重试",icon:"none"})}})}else uni.showModal({title:"提示",content:"蓝牙已断开",showCancel:!1,success:function(t){e.searching=!1}})},onBLECharacteristicValueChange:function(){console.log("onBLECharacteristicValueChange");var e=this;console.log(uni.onBLECharacteristicValueChange),uni.onBLECharacteristicValueChange((function(t){if(console.log("1"),console.log("监听低功耗蓝牙设备的特征值变化事件成功4",t.value),console.log(c.globalData.buf2string(t.value)),"rcd[1]"==e.inputText){var n=c.globalData.Str2Bytes(t.value);console.log(c.globalData.Str2Bytes(t.value));var i=c.globalData.buf2string(n)}else i=c.globalData.buf2string(t.value);e.receiveText=i}))}}};t.default=i},f44e:function(e,t,n){var c=n("c86c");t=c(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * uni-app内置的常用样式变量\r\n */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-51ec9d63]{background-color:#f8f8f8}body.?%PAGE?%[data-v-51ec9d63]{background-color:#f8f8f8}.container[data-v-51ec9d63]{padding:%?30?%;align-items:left}.input[data-v-51ec9d63]{margin-top:3px;width:100%;border:1px solid #d3d3d3;border-radius:6px}.res[data-v-51ec9d63]{margin-top:3px;width:100%;border:3px solid #d3d3d3;border-radius:6px}.button[data-v-51ec9d63]{position:fixed;width:%?690?%;bottom:%?30?%}',""]),e.exports=t},fdb0:function(e,t,n){var c=n("f44e");c.__esModule&&(c=c.default),"string"===typeof c&&(c=[[e.i,c,""]]),c.locals&&(e.exports=c.locals);var i=n("967d").default;i("6569befa",c,!0,{sourceMap:!1,shadowMode:!1})},ffa5:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container"},[n("v-uni-text",{staticStyle:{"font-size":"medium","word-break":"break-all"}},[e._v("设备名称："+e._s(e.name))]),n("v-uni-text",{staticStyle:{"font-size":"x-small",color:"gray","word-break":"break-all"}},[e._v("设备ID："+e._s(e.connectedDeviceId))]),n("v-uni-text",{staticStyle:{"font-size":"x-small",color:"gray"}},[e._v("状态："+e._s(e.connected?"已连接":"已断开"))]),n("v-uni-text",{staticStyle:{"font-size":"medium","margin-top":"10px"}},[e._v("接收内容：")]),n("v-uni-textarea",{staticClass:"res",attrs:{maxlength:"-1",disabled:!0,value:e.receiveText}}),n("v-uni-text",[e._v(" \\n ")]),n("v-uni-text",{staticStyle:{"font-size":"medium","margin-top":"10px"}},[e._v("发送内容：")]),n("v-uni-input",{staticClass:"input",attrs:{value:e.inputText,maxlength:"20"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.bindInput.apply(void 0,arguments)}}}),n("v-uni-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.Send.apply(void 0,arguments)}}},[e._v("发送")])],1)},i=[]}}]);