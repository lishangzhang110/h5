(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pack_monitors-monitors-ecg-ecg-detect"],{"02c1":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAMAAAC45U6nAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAyIDc5Ljc4Yjc2MzhlNiwgMjAyNS8wMi8xMS0yMzoxNDoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzU5NTgzOTQ2NjA0MTFGMEFDRjlEODIwQzBBNDg2RkMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzU5NTgzOTM2NjA0MTFGMEFDRjlEODIwQzBBNDg2RkMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIwMjUgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSIwNjNCNEM4OTQwNjMyQzMyNDdFQUE2QTA3NDk2OTc2NiIgc3RSZWY6ZG9jdW1lbnRJRD0iMDYzQjRDODk0MDYzMkMzMjQ3RUFBNkEwNzQ5Njk3NjYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4xws8DAAABDlBMVEXf4OXw8PD9/f309PTf4OT4+Pjv7+/+/v7g4eX39/fz8/Px8fH5+fn19fX8/Pzr6+3+///i4uTh4uTt7e3p6u7p6u/u7vDy8vLt7+7f4OLe3+Pe3+Tp6uzp6fHf3+fh4ubl5efq6uzm5ujs7u3g3+T///3q6e7+/v/t7vD6+vr4+Prg4ebp6+r7+/vp6ev09Pbq6+/s7O79/v/i4+Xn5+ng3+Xw8PL19ff5+fvv7/Hs7e/h4+Lj4+Pk5eru8O/t7e/h4ePq6/Di4uLo6evg4uHo6unq6+3u7/Hd4OXy9PP3+fjf4eD29vbl5+bm5ubk5enl5eXs7Ozk5uX9/f/g4ePp6en39/nr6+vu7u7///8CD/adAAADqklEQVR42uxaCXuaQBAFxF1BEo8FxCuXTTVN0qRJ06b3fd/3+P//SHclKAyrWdEkX/sxnyg8Fp7DHm9nWE0TZppra6YpfjWt2QmCl2YcM1sfgqAXlhPfa2vNpmnWB8Erfs5sNkP8Grev4G9E94lvjzzPc91u13XFr+d1BkFvz30Ww9zDPc7heeF5z+t2Ox3XfT3o9fg5t9MJ8evc/oBfie4TbSXOURkiswEoxgiUMbTK/LsYKwIUMTYHRyPFAUvnSPsBsJJz5BxTOMz/ioMmOZKlqJTDUORYDzko9mO45DrfzDyWLNaujIx+OABOxrZLZ3DQpfUPXcbBlJ/V1kHBLsRsRSewYk8gW3wASAGZDaSMsTJACuMc7Q2fMViSsdEnaSM//DQOKqyEKHNs/jC4UWNsDYBVg8YAbrzODWQ7AAVqJItZABYuV2pd0bjbSHNQVQ6m2M8lHENYwI+WUj8XfVDPyrGuPl6l/NjndZ7rec6Rc/w7HDTT3IekOKwF/KAL+rF1R08alzedpCDQsXEl1EmsIN8lDAguJjg2fLmSzjg6R9KTxsfd3ZQfvFjSibL4z1I/iH6+v9O1li5Po/izuiXhwE1NtV2p9w+23P7RyseSnCPnuKyYM+u8nV6IH0QpPjcWGUsac9UHRVprKY67LDW2S2MDUsDFpuYy+kYyIOR+GMZqIqajknhQxAYYk8aDQmufsJkyG0awRE1YZXFtaaznJEP0LLu/NHa+fVBIJhr4v8a5AnmeARqJ62xbnmcojdoVzZxbonO0XZSHo1Q5rqWXOpbQKRwlrb3Zz5qHU56XtCt9ybPKPiZasvhc8qzIAnkGS/KsMuvHfq6DOUfOcfUcinp+89RxnKIzMS40RWdncix2+ZzBQWYRsDHGtayAsXHszOaPieXBdjqvLjRqy8+cXieS1Lhcz39bSdMJKSLIIkzH0Eeu5xjjVWljbI48dVqjGFtyuyJX0nYNIs23z3gfVa2GW8QROz63D25vR9dP/Jhcf7kc+ZiYc1w0xz1fJfcqi2tv3JuiHykO31eZixopjaLDU1/1vbOEQ9UPf8q8HQumIofsvbOMQ8zbD6v9cc8fbe8Ajo6GCWxIWDlRphrWOcbeB1DE2G5b08z1Wq1Zf1qr12uj7cEekOOz/Wh7zuBbHWEPCfyqHyexT4/hMy6nadpbrT1a69WOryP7qWlatG5MrBRr3vcr4RoycXxyItaP1QdvXvDDdoSLM9+D4MvkurN1Z7t/BRgA5Q+NQw5oS9QAAAAASUVORK5CYII="},"0ad7":function(t,e,c){var n=c("c86c"),a=c("2ec5"),i=c("02c1"),r=c("5d0d");e=n(!1);var u=a(i),o=a(r);e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * uni-app内置的常用样式变量\r\n */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.ecg-detect[data-v-c975492e]{width:100%;height:100%}.ecg-detect .ecg-detect-content[data-v-c975492e]{margin-top:%?50?%}.ecg-detect .ecg-detect-content .ecg-detect-chart[data-v-c975492e]{height:%?600?%;width:100%;background-image:url('+u+");background-size:%?50?% %?50?%}.ecg-detect .ecg-detect-content .ecg-detect-img[data-v-c975492e]{margin:0 auto;height:%?420?%;width:%?600?%;background-image:url("+o+");background-size:100% 100%}.ecg-detect .ecg-detect-bottom[data-v-c975492e]{text-align:center}.ecg-detect .ecg-detect-bottom .ecg-detect-countdown[data-v-c975492e]{font-size:%?50?%}.ecg-detect .ecg-detect-text-error[data-v-c975492e]  .u-button{color:#fff;background:linear-gradient(236deg,#41d0c2,#47d7b1);border-radius:%?41?% %?41?% %?41?% %?41?%;border:none;width:100%}",""]),t.exports=e},"2a46":function(t,e,c){"use strict";var n=c("76dc"),a=c.n(n);a.a},"2ec5":function(t,e,c){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"5d0d":function(t,e,c){t.exports=c.p+"static/images/ecg-detect.png"},"76dc":function(t,e,c){var n=c("0ad7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=c("967d").default;a("360b7ff9",n,!0,{sourceMap:!1,shadowMode:!1})},"8e97":function(t,e,c){"use strict";c.d(e,"b",(function(){return a})),c.d(e,"c",(function(){return i})),c.d(e,"a",(function(){return n}));var n={uButton:c("e44a").default},a=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("v-uni-view",{staticClass:"ecg-detect"},[c("v-uni-view",{staticClass:"ecg-detect-content"},[c("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:3===t.ecgState,expression:"ecgState === 3"}],staticClass:"ecg-detect-chart"},[c("l-echart",{ref:"chartRef",on:{finished:function(e){arguments[0]=e=t.$handleEvent(e),t.initEcharts.apply(void 0,arguments)}}})],1),1===t.ecgState||0===t.ecgState&&0===t.count?c("v-uni-view",{staticClass:"ecg-detect-img"}):t._e()],1),c("v-uni-view",{staticClass:"ecg-detect-bottom"},[0===t.ecgState&&t.count>0?c("v-uni-view",{staticClass:"ecg-detct-text ecg-detect-text-start"},[c("v-uni-view",[c("v-uni-text",[t._v("请保持手势，正在分析数据...")])],1),c("v-uni-view",[c("v-uni-text",{staticClass:"ecg-detect-countdown"},[t._v(t._s(t.count))]),t._v("s")],1)],1):t._e(),0===t.ecgState&&0===t.count?c("v-uni-view",{staticClass:"ecg-detct-text ecg-detect-text-error"},[c("v-uni-view",[c("v-uni-text",[t._v("检测失败，请重新开始检测")])],1),c("v-uni-view",[c("u-button",{attrs:{type:"primary",shape:"circle",text:"重新开始检测",size:"middle"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.startDetectEcg()}}})],1)],1):t._e(),1===t.ecgState?c("v-uni-view",{staticClass:"ecg-detct-text ecg-detect-text-pause"},[c("v-uni-view",[c("v-uni-text",[t._v("检测中断，请确定手势是否正确")])],1)],1):t._e(),3===t.ecgState?c("v-uni-view",{staticClass:"ecg-detct-text ecg-detect-text-pause"},[c("v-uni-view",[c("v-uni-text",[t._v("继续保持，等待检测结束")])],1)],1):t._e()],1)],1)},i=[]},a113:function(t,e,c){"use strict";c.r(e);var n=c("b72b"),a=c.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){c.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},acbb:function(t,e,c){"use strict";c.r(e);var n=c("8e97"),a=c("a113");for(var i in a)["default"].indexOf(i)<0&&function(t){c.d(e,t,(function(){return a[t]}))}(i);c("2a46");var r=c("828b"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"c975492e",null,!1,n["a"],void 0);e["default"]=u.exports},b72b:function(t,e,c){"use strict";c("6a54");var n=c("3639").default,a=c("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,c("e966"),c("dd2b"),c("aa9c");var i=a(c("2634")),r=a(c("2fdc")),u=a(c("fcf3")),o=a(c("9b1b")),s=c("8f59"),d=n(c("a4e1")),g=a(c("59c5")),v=c("edd5"),l={components:{lEchart:g.default},data:function(){return{count:10,countDown:null,detectStatus:!1,chartInterval:null,chart:null,chartDataLength:0,ecgData:[],chartOption:{}}},computed:(0,o.default)((0,o.default)((0,o.default)({},(0,s.mapGetters)(["currentDevice"])),(0,s.mapState)({ecgState:function(t){return parseInt(t.device.detectData.ecgState)},ecg:function(t){return t.device.detectData.ecg}})),{},{ecgLength:function(){return this.ecg.length},ecgPercent:function(){return Math.floor(this.ecg.length/7500)}}),watch:{ecgState:function(t){console.log((0,u.default)(t))},ecgLength:function(t){if(7500===t)return console.log("检测结束"),void this.endDetectEcg();var e=t-this.chartDataLength;t>200&&this.ecgData.splice(0,e);for(var c=this.chartDataLength;c<t;c++)this.ecgData.push(this.ecg[c-1]);this.chartDataLength=t,console.log(66,this.ecgData,this.chartDataLength,t),this.initEcharts()}},onLoad:function(){this.startDetectEcg()},onUnload:function(){this.interruptEcg()},onBackPress:function(){this.interruptEcg()},methods:{startChartInterval:function(){},initEcharts:function(){var t=this;return(0,r.default)((0,i.default)().mark((function e(){var c,n,a;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(console.log("initEcharts"),c=[],n=200;n>0;n--)c.push(n/125);return t.chartOption={grid:{top:50,left:0,right:0,bottom:50},xAxis:{data:c,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{show:!1},dataZoom:[{type:"inside",start:0,end:100}],series:[{type:"line",data:t.ecgData,symbol:"none",lineStyle:{color:"rgba(31, 197, 159)",width:2}}]},e.next=6,t.$refs.chartRef.init(d);case 6:a=e.sent,a.setOption(t.chartOption);case 8:case"end":return e.stop()}}),e)})))()},initData:function(){},startDetectEcg:function(){this.startCountDown(),this.currentDevice.operation.ecgDetect(1)},startCountDown:function(){var t=this;clearInterval(this.countDown),this.countDown=setInterval((function(){t.count--,0===t.count&&(clearInterval(t.countDown),t.pauseDetectEcg())}),1e3)},pauseDetectEcg:function(){0===this.ecgState&&this.currentDevice.operation.ecgDetect(0)},interruptEcg:function(){4!==this.ecgState&&this.currentDevice.operation.ecgDetect(3)},endDetectEcg:function(){var t=this;console.log("endDetectEcg......"),this.currentDevice.operation.ecgDetect(2),(0,v.saveEcgData)({id:this.currentDevice.id,detectData:{ecg:this.ecg}}).then((function(e){t.$tab.navigateTo("/pack_monitors/pages/ecg/ecg-detail?ecgId=".concat(e.data))}))}}};e.default=l}}]);